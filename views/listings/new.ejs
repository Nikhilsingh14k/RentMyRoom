<% layout("/layouts/boilerplate") %>
   <div class="row">
    <div class="col-8 offset-2">
        <br><br>
    <h3>Create a New Listing:</h3>
    <form action="/listings" method="POST" novalidate class="needs-validation">
        <div class="mb-3">
            <label for="title" class="form-label">Title:</label>
            <input type="text" id="title" name="listing[title]" class="form-control" required>
            <div class="invalid-feedback">
                Please fill the Title.
              </div>
        </div>

       
         <div class="mb-3">
            <label for="description" class="form-label">Description:</label>
            <textarea name="listing[description]" class="form-control" required></textarea>
            <div class="invalid-feedback">
                Please fill the Description.
              </div>
         </div>
       <div class="row">
        <div class="mb-3 col-md-4">
            <label for="price" class="form-label">Price:</label>
            <input type="number"  name="listing[price]" class="form-control" required>
            <div class="invalid-feedback">
                Please fill the Price.
              </div>
        </div>
        <div class="mb-3 col-md-4">
          <label for="BHK" class="form-label">BHK:</label>
          <input type="number"  name="listing[BHK]" class="form-control" required>
          <div class="invalid-feedback">
              Please fill the number of BHK's.
            </div>
      </div>
        <div class="mb-3 col-md-8">
            <label for="country" class="form-label">State:</label>
            <input type="text"  name="listing[state]" class="form-control" required>
            <div class="invalid-feedback">
                Please fill the State name.
              </div>
           </div>
        </div>
        <div class="mb-3">
            <label for="location" class="form-label">Location:</label>
            <input type="text"  name="listing[location]" class="form-control" required>
            <div class="invalid-feedback">
                Please fill the Location.
              </div>
        </div>

       <div class="mb-3" id="image-inputs">
        <label for="image" class="form-label">Image URLs:</label>
        <div class="input-group mb-3">
            <input type="url" name="listing[image][]" class="form-control" multiple>
            <button type="button" class="btn btn-outline-secondary" onclick="addImageInput()">+</button>
        </div>
        <small class="text-muted">You can add multiple image URLs. Click + to add more.</small>
    </div>
       
     
        <button class="btn btn-dark" type="submit" >Create Listing</button>
        <br><br>
    </form>
  </div>
</div>


<script>
  function addImageInput() {
      const imageInputs = document.getElementById('image-inputs');
      const lastInput = imageInputs.querySelector('input[type="url"]:last-child');

      const newInput = document.createElement('div');
      newInput.classList.add('input-group', 'mb-3');
      newInput.innerHTML = `
          <input type="url" name="listing[image][]" class="form-control" multiple>
          <button type="button" class="btn btn-outline-secondary" onclick="removeImageInput(this)">-</button>
      `;

      imageInputs.appendChild(newInput);
  }

  function removeImageInput(button) {
      button.parentNode.remove();
  }
</script>
